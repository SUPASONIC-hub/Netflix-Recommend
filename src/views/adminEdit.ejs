<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>추천 수정</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Nanum Gothic', system-ui, -apple-system, BlinkMacSystemFont,
          'Segoe UI', sans-serif;
        font-size: 14px;
        background-color: #ffffff;
        color: #212529;
      }
      .navbar-brand {
        font-weight: 700;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4 border-bottom">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">넷플릭스 추천</a>
        <div class="d-flex gap-2">
          <a href="/admin/new" class="btn btn-primary btn-sm">추천 등록</a>
          <a href="/content/<%= content.id %>" class="btn btn-outline-secondary btn-sm">상세로</a>
        </div>
      </div>
    </nav>

    <div class="container mb-5">
      <h1 class="mb-3">추천 수정</h1>
      <form method="post" action="/admin/content/<%= content.id %>/edit">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">제목</label>
            <input
              type="text"
              name="title"
              class="form-control"
              value="<%= content.title || '' %>"
              required
            />
          </div>
          <div class="col-md-6">
            <label class="form-label">이름(name)</label>
            <input
              type="text"
              name="name"
              class="form-control"
              value="<%= content.name || '' %>"
            />
          </div>
          <div class="col-12">
            <label class="form-label">개요</label>
            <textarea name="overview" class="form-control" rows="3"><%= content.overview || '' %></textarea>
          </div>
          <div class="col-md-4">
            <label class="form-label">연도</label>
            <input type="text" name="year" class="form-control" value="<%= content.year || '' %>" />
          </div>
          <div class="col-md-4">
            <label class="form-label">타입(type)</label>
            <input type="text" name="type" class="form-control" value="<%= content.type || '' %>" />
          </div>
          <div class="col-md-4">
            <label class="form-label">미디어 타입(mediaType)</label>
            <input
              type="text"
              name="mediaType"
              class="form-control"
              value="<%= content.mediaType || '' %>"
            />
          </div>
          <div class="col-md-6">
            <label class="form-label">공개일(releaseDate)</label>
            <input
              type="text"
              name="releaseDate"
              class="form-control"
              value="<%= content.releaseDate || '' %>"
            />
          </div>
          <div class="col-md-6">
            <label class="form-label">방영일(firstAirDate)</label>
            <input
              type="text"
              name="firstAirDate"
              class="form-control"
              value="<%= content.firstAirDate || '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">posterPath</label>
            <input
              type="text"
              name="posterPath"
              class="form-control"
              value="<%= content.posterPath || '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">posterUrl</label>
            <input
              type="text"
              name="posterUrl"
              class="form-control"
              value="<%= content.posterUrl || '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">backdropPath</label>
            <input
              type="text"
              name="backdropPath"
              class="form-control"
              value="<%= content.backdropPath || '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">genreIds (JSON 또는 쉼표)</label>
            <input
              type="text"
              name="genreIds"
              class="form-control"
              value="<%= Array.isArray(content.genreIds) ? JSON.stringify(content.genreIds) : '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">popularity</label>
            <input
              type="text"
              name="popularity"
              class="form-control"
              value="<%= typeof content.popularity === 'number' ? content.popularity : '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">voteAverage</label>
            <input
              type="text"
              name="voteAverage"
              class="form-control"
              value="<%= typeof content.voteAverage === 'number' ? content.voteAverage : '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">voteCount</label>
            <input
              type="text"
              name="voteCount"
              class="form-control"
              value="<%= typeof content.voteCount === 'number' ? content.voteCount : '' %>"
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">adult</label>
            <select name="adult" class="form-select">
              <option value="false" <%= content.adult ? '' : 'selected' %>>false</option>
              <option value="true" <%= content.adult ? 'selected' : '' %>>true</option>
            </select>
          </div>
          <div class="col-12">
            <label class="form-label">내 감상평</label>
            <textarea name="myNote" class="form-control" rows="4" required><%= content.myNote || '' %></textarea>
          </div>
          <div class="col-md-4">
            <label class="form-label">내 평점 (0.5~5)</label>
            <input
              type="number"
              step="0.5"
              min="0.5"
              max="5"
              name="myRating"
              class="form-control"
              value="<%= content.myRating %>"
              required
            />
          </div>
          <div class="col-md-8">
            <label class="form-label">태그 (쉼표 구분)</label>
            <input
              type="text"
              name="tags"
              class="form-control"
              value="<%= Array.isArray(content.tags) ? content.tags.join(', ') : '' %>"
            />
          </div>
        </div>

        <div class="mt-4 d-flex gap-2">
          <button type="submit" class="btn btn-primary">수정 저장</button>
          <a href="/content/<%= content.id %>" class="btn btn-outline-secondary">취소</a>
        </div>
      </form>
    </div>
  </body>
</html>
